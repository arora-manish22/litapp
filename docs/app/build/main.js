webpackJsonp([24],{129:function(t,e,n){"use strict";n(145),n(36),n(64),n(97),n(137),n(212),n(146),n(70),n(227);var r=n(45);n(56),n(32),n(218);n.d(e,"a",function(){return r.a})},137:function(t,e,n){"use strict";n.d(e,"a",function(){return i});n(0);var r=n(54),o=(n.n(r),n(41),n(408)),s=(n(45),n(64),n(56),n(36),n(58)),i=(n(32),function(){function t(t,e,n,r,o,i){var a=this;this.api=t,this.s=e,this.settings=n,this.user=r,this.storage=o,this.ux=i,this.ready=new Promise(function(t,e){Promise.all([a.settings.load(),a.user.onReady(),a.s.onReady(),a.storage.get(s.d)]).then(function(e){if(!a.settings.allSettings.cachelists||a.settings.allSettings.offlineMode||!a.user.isLoggedIn())return t(),void(e[3]&&a.storage.remove(s.d));e[3]&&(a.lists=e[3]),a.query(!0).subscribe(function(e){var n=0;e.forEach(function(r,o){a.getById(r.urlname,!0).subscribe(function(r){(n+=1)===e.length&&t()})})})})})}return t.prototype.onReady=function(){return this.ready},t.prototype.query=function(t){var e=this;if(this.lists)return r.Observable.of(this.lists);var n;return t||(n=this.ux.showLoader()),this.api.get("3/users/"+this.user.getId()+"/lists").map(function(t){return n&&n.dismiss(),t.error?(e.ux.showToast(),console.error("lists.query",t.error),[]):(e.lists=t.map(function(t){return new o.a({id:t.id,urlname:t.urlname,name:t.title,description:t.description,visibility:!t.is_private,size:t.stories_count,isdeletable:t.is_deletable,createtimestamp:t.created_at,updatetimestamp:t.updated_at,lastPage:-1})}),e.storage.set(s.d,e.lists),e.lists)}).catch(function(t){return n&&n.dismiss(),e.ux.showToast(),console.error("lists.query",t),r.Observable.of([])})},t.prototype.getById=function(t,e){var n=this,o=this.lists.find(function(e){return e.urlname===t});if(o.stories)return r.Observable.of(o);var i;return e||(i=this.ux.showLoader()),r.Observable.create(function(e){var r=function(a,u){n.getListPage(t,i,Object.assign({},u),a).subscribe(function(t){if(t){var l=u;if(u.stories?l.stories=l.stories.concat(t.stories):l=t,t.size>l.stories.length&&a<l.lastPage){var c=a+1;n.ux.updateLoader(Math.round(l.stories.length/t.size*100)+"%"),r(c,l)}else n.lists[n.lists.indexOf(o)]=l,n.storage.set(s.d,n.lists),i&&i.dismiss(),e.next(l),e.complete()}})};r(1,o)})},t.prototype.getListPage=function(t,e,n,s){var i=this;void 0===s&&(s=1);var a={page:s,sort:"dateadd"};return this.api.get("3/users/"+this.user.getId()+"/lists/"+t,{params:JSON.stringify(a)}).map(function(e){if(!e.works.data)return i.ux.showToast(),console.error("lists.getListPage",[t,n,s]),null;var r=n;return n||(r=new o.a({id:e.list.id,urlname:e.list.urlname,name:e.list.title,description:e.list.description,visibility:!e.list.is_private,size:e.list.stories_count,isdeletable:e.list.is_deletable,createtimestamp:e.list.created_at,updatetimestamp:e.list.updated_at})),r.lastPage=e.works.meta.last_page,r.stories=e.works.data.map(function(t){return i.s.extactFromList(t)}),r}).catch(function(o){return e&&e.dismiss(),i.ux.showToast(),console.error("lists.getListPage",[t,n,s],o),r.Observable.of(null)})},t.prototype.addStory=function(t,e){var n=this;return this.api.put("3/stories/"+e.id+"/lists/"+t.id,{}).map(function(t){return t.success}).catch(function(o){return n.ux.showToast(),console.error("lists.addStory",[t,e],o),r.Observable.of(!1)}).subscribe(function(r){r?(t.stories||(t.stories=[]),t.stories.push(e),t.size+=1,n.storage.set(s.d,n.lists)):(n.ux.showToast(),console.error("lists.addStory",[t,e]))})},t.prototype.removeStory=function(t,e){var n=this;return this.api.delete("3/stories/"+e.id+"/lists/"+t.id).map(function(t){return t.success}).catch(function(o){return n.ux.showToast(),console.error("lists.removeStory",[t,e],o),r.Observable.of(!1)}).subscribe(function(r){if(r){if(!t.stories)return;t.stories.forEach(function(n,r){n.id===e.id&&t.stories.splice(r,1)}),t.size-=1,n.storage.set(s.d,n.lists)}else n.ux.showToast(),console.error("lists.removeStory",[t,e])})},t.prototype.add=function(t){var e=this,n={title:t.name,description:t.description,isPrivate:t.visibility?0:1};return this.api.post("3/users/"+this.user.getId()+"/lists",n,void 0,!1).map(function(n){return n.success?(e.lists.push(new o.a({id:n.list.id,urlname:n.list.urlname,name:n.list.title,description:n.list.description,visibility:!n.list.is_private,size:n.list.stories_count,isdeletable:n.list.is_deletable,createtimestamp:n.list.created_at})),e.storage.set(s.d,e.lists),!0):(e.ux.showToast(),console.error("lists.add",[t]),!1)}).catch(function(n){return e.ux.showToast(),console.error("lists.add",[t],n),r.Observable.of(!1)})},t.prototype.edit=function(t){var e=this;return this.api.patch("3/lists/"+t.id,{title:t.name,description:t.description,isPrivate:t.visibility?0:1}).map(function(n){return n.success?(e.lists.forEach(function(e){e.id===t.id&&(e.name=n.list.title,e.description=n.list.description,e.visibility=!n.list.is_private)}),e.storage.set(s.d,e.lists),!0):(e.ux.showToast(),console.error("lists.edit",[t]),!1)}).catch(function(n){return e.ux.showToast(),console.error("lists.edit",[t],n),r.Observable.of(!1)})},t.prototype.delete=function(t){var e=this;return this.api.delete("3/lists/"+t.id).map(function(n){return n.success?(e.lists.forEach(function(n,r){n.urlname===t.urlname&&e.lists.splice(r,1)}),e.storage.set(s.d,e.lists),!0):(e.ux.showToast(),console.error("lists.delete",[t]),!1)}).catch(function(n){return e.ux.showToast(),console.error("lists.delete",[t],n),r.Observable.of(!1)})},t.prototype.refresh=function(){return this.storage.remove(s.d),this.lists=null,this.query()},t}())},141:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e){if("cordova_not_available"!==t)throw console.error(t),t;e&&e(t)}},145:function(t,e,n){"use strict";n.d(e,"a",function(){return o});n(0),n(178),n(70);var r=n(141),o=(n(45),function(){function t(t,e,n){var o=this;this.g=t,this.settings=e,this.googleAnalytics=n,this.type="android",Promise.all([this.settings.load(),this.g.onReady()]).then(function(){if(!o.settings.allSettings.offlineMode){var t=function(){window.gtag&&(o.type="web",gtag("js",new Date),gtag("config","UA-142185587-3",{send_page_view:!0,anonymize_ip:!0}))};try{Promise.all([o.googleAnalytics.startTrackerWithId("UA-142185587-2",120),o.googleAnalytics.setAnonymizeIp(!0),o.googleAnalytics.setAllowIDFACollection(!1),o.googleAnalytics.setAppVersion(o.g.getVersion().toString())]).then(function(){o.track("Startup")}).catch(function(e){return Object(r.a)(e,t)})}catch(e){Object(r.a)(e,t)}}})}return t.prototype.track=function(t){console.info("Track",t),this.settings.allSettings.offlineMode||("android"===this.type?this.googleAnalytics.trackView(t).catch(function(t){return Object(r.a)(t)}):"web"===this.type&&gtag("event","screem_view",{app_name:this.g.getVersion().toString(),screen_name:t}))},t}())},146:function(t,e,n){"use strict";n(0),n(1);var r=n(54),o=(n(41),function(){return function(t){for(var e in t)this[e]=t[e]}}()),s=(n(64),n(97),n(56),n(45),n(58));n(36),n(32);n.d(e,"a",function(){return i});var i=function(){function t(t,e,n,r,o,i,a){var u=this;this.api=t,this.s=e,this.a=n,this.user=r,this.settings=o,this.storage=i,this.ux=a,this.timeout=6e5,this.feedtimeout=(new Date).getTime()+this.timeout,this.feedbadge="",this.ready=new Promise(function(t,e){Promise.all([u.settings.load(),u.user.onReady()]).then(function(){u.settings.allSettings.checkforfeedupdates&&!u.settings.allSettings.offlineMode&&u.user.isLoggedIn()?(u.feedbadge="Â·",u.query().subscribe(function(e){e?u.storage.get(s.a).then(function(n){for(var r=0;r<e.length;r+=1)if(n===e[r].id){u.feedbadge=String(r);break}""===u.feedbadge&&(u.feedbadge="15+"),t()}):t()})):t()})})}return t.prototype.onReady=function(){return this.ready},t.prototype.query=function(t,e,n){var s=this;if(void 0===n&&(n=!1),!n&&!t&&this.feed&&(new Date).getTime()<this.feedtimeout)return r.Observable.of(this.feed);t&&this.feed||(this.feed=[]);var i;e&&(i=this.ux.showLoader());var a={chunked:1,limit:10};return t&&(a.last_id=t),this.api.get("3/activity/wall?params="+JSON.stringify(a)).map(function(e){if(i&&i.dismiss(),!e.data)return s.ux.showToast(),console.error("feed.query",[t]),[];var n=e.data.map(function(t){var e="published-story"===t.action;try{return new o({id:t.id,timestamp:t.when,author:s.a.extractFromFeed(t.who),text:e?[]:Array.isArray(t.what)?t.what:["their profile"],story:e?s.s.extractFromFeed(t):void 0})}catch(t){return new o(null)}}).filter(function(t){return!(!t.id||s.settings.allSettings.onlyShowStoriesInFeed&&!t.story)});return n.forEach(function(t){return s.feed.push(t)}),s.feedtimeout=(new Date).getTime()+s.timeout,n}).catch(function(e){return i&&i.dismiss(),s.ux.showToast(),console.error("feed.query",[t],e),r.Observable.of([])})},t}()},153:function(t,e,n){"use strict";n.d(e,"a",function(){return o});n(0),n(44),n(95);var r=n(141),o=(n(129),function(){function t(t,e,n,r){var o=this;this.viewCtrl=e,this.browser=n,this.api=r,this.data=t.get("data")||{},this.api.get("repos/theilluminatus/litapp/git/refs/tags",void 0,void 0,5).subscribe(function(t){var e=Array.isArray(t)?t.reverse()[0].object.sha:"";e&&o.api.get("repos/theilluminatus/litapp/git/tags/"+e,void 0,void 0,5).subscribe(function(t){o.changelog=t.message.replace(/\n/gi,"\n\n")})})}return t.prototype.cancel=function(){this.viewCtrl.dismiss()},t.prototype.update=function(){var t=this.data.updatelink||"https://theilluminatus.github.io/litapp";this.browser.openUrl(t).catch(function(e){return Object(r.a)(e,function(){return window.open(t)})})},t}())},212:function(t,e,n){"use strict";n.d(e,"a",function(){return s});n(0),n(34);var r=n(42),o=(n.n(r),n(409)),s=(n(36),function(){function t(t,e){var n=this;this.api=t,this.translate=e,this.categories=[],this.sortMap=new Map,this.categories=this.api.get("3/tagsportal/categories",null).map(function(t){var e=[];return t.forEach(function(t){e.push(new o.a({id:t.id,name:t.name,description:t.ldesc,type:t.type,url:t.pageUrl}))}),n.translate.get(["EXPLORE_ALLCAT","EXPLORE_ALLCATDESCR"]).subscribe(function(t){e.push(new o.a({id:0,name:t.EXPLORE_ALLCAT,description:t.EXPLORE_ALLCATDESCR,type:"master",url:""}))}),e}),this.sortMap.set("master",0),this.sortMap.set("story",1),this.sortMap.set("poem",2)}return t.prototype.mapSorter=function(t){return function(e,n){return t.get(e.type)>t.get(n.type)?1:t.get(e.type)<t.get(n.type)?-1:e.name>n.name?1:e.name<n.name?-1:void 0}},t.prototype.get=function(t){return this.categories.map(function(e){return e.find(function(e){return e.id===t})})},t.prototype.getAll=function(){return this.categories.map(function(t){return t.filter(function(t){return["master","story","poem"].includes(t.type)})})},t.prototype.getAllSorted=function(){var t=this;return this.getAll().map(function(e){return e.sort(t.mapSorter(t.sortMap))})},t.prototype.getAllSortedGrouped=function(){var t=this;return this.getAllSorted().map(function(e){var n=[];return t.sortMap.forEach(function(t,r){n.push(e.filter(function(t){return t.type===r}))}),n})},t.prototype.getClosestCategory=function(t){return this.getAll().map(function(e){return e.find(function(e){return!(!e.id||e.id.toString()!==t)||(!(!e.name||e.name!==t)||!!(e.name&&e.name.toLowerCase().indexOf(t.toLowerCase())>-1))})})},t.prototype.getType=function(t){return this.sortMap.has(t)?this.getAllSorted().map(function(e){return e.filter(function(e){return e.type===t})}):(console.error("categories.getType",[t],"Unsupported Category Type"),new r.EmptyObservable)},t}())},218:function(t,e,n){"use strict";n.d(e,"a",function(){return s});n(0),n(32),n(34),n(147),n(148),n(185);var r=n(141),o=function(t,e){var n=window.URL.createObjectURL(new Blob([t],{type:"text/plain"})),r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=n,r.download=e,r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r)},s=function(){function t(t,e,n,r,o){var s=this;this.ux=t,this.file=e,this.filePath=n,this.fileOpener=r,this.translate=o,this.translate.get(["FILE_EXPORT_SUCCESS"]).subscribe(function(t){s.translations=t})}return t.prototype.save=function(t,e,n){var s=this;try{var i=this.file.externalRootDirectory,a=t.replace(/[\\\\/:*?"<>|]/gm,"_"),u=""+i+a;this.file.writeFile(i,a,e,{replace:!0}).then(function(){s.ux.showToast("INFO",s.translations.FILE_EXPORT_SUCCESS+": "+u,void 0,"FILE_VIEW").then(function(){s.fileOpener.open(u,"application/json")})}).catch(function(t){return Object(r.a)(t,function(t){return o(e,a)})})}catch(t){this.ux.showToast("ERROR","FILE_EXPORT_FAIL"),console.error("files.save",[e],t)}},t}()},227:function(t,e,n){"use strict";n.d(e,"a",function(){return s});n(0);var r=n(54),o=(n.n(r),n(41),n(64),n(58)),s=function(){function t(t,e){var n=this;this.stories=t,this.storage=e,this.history=[],this.ready=new Promise(function(t,e){Promise.all([n.stories.onReady()]).then(function(){n.storage.get(o.c).then(function(e){var r=0;if(e){var o=[];e.forEach(function(s,i){n.stories.getById(s).subscribe(function(s){s&&(o[i]=s),(r+=1)===e.length&&(n.history=o,n.clean().then(function(){return t()}))})})}else n.history=[],t()})})})}return t.prototype.onReady=function(){return this.ready},t.prototype.getDownloadStories=function(){var t=this;return new Promise(function(e){t.storage.length().then(function(n){var s=[];t.storage.forEach(function(i,a,u){a.indexOf(o.i)>-1&&i.downloaded&&s.push(i.id),u>=n&&r.Observable.forkJoin(s.map(function(e){return t.stories.getById(e)})).subscribe(function(t){var n=t.sort(function(t,e){return e.downloadedtimestamp-t.downloadedtimestamp});e(n)})})})})},t.prototype.getStories=function(){return this.history.slice()},t.prototype.getIds=function(){return this.history.map(function(t){return t.id})},t.prototype.persist=function(){return this.storage.set(o.c,this.getIds())},t.prototype.add=function(t){var e=this.getIds().indexOf(t.id);return e>-1&&this.history.splice(e,1),this.history.push(t),this.persist()},t.prototype.remove=function(t,e){var n=this.getIds().indexOf(t.id),r=[];return n>-1&&(this.history.splice(n,1),r.push(this.persist())),t.downloaded&&!e||r.push(this.stories.remove(t)),Promise.all(r)},t.prototype.reset=function(){this.history=[],this.storage.set(o.c,[]),this.stories.removeAll()},t.prototype.clean=function(){var t=this;return new Promise(function(e){var n=t.history.slice(0,Math.max(t.history.length-50,0));n.length<1?e():(n.forEach(function(e,n){t.remove(e)}),e())})},t}()},240:function(t,e,n){"use strict";n.d(e,"a",function(){return r});n(0),n(44),n(34);var r=function(){return function(){}}()},253:function(t,e){function n(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=253},293:function(t,e,n){function r(t){var e=o[t];return e?n.e(e[1]).then(function(){return n(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var o={"../pages/account/account.module.ngfactory":[692,21],"../pages/author/author.module.ngfactory":[693,7],"../pages/explore/explore.module.ngfactory":[694,19],"../pages/feed/feed.module.ngfactory":[695,6],"../pages/following/following.module.ngfactory":[696,10],"../pages/history/history.module.ngfactory":[697,2],"../pages/list-create/list-create.module.ngfactory":[700,13],"../pages/list-list/list-list.module.ngfactory":[698,12],"../pages/list-view/list-view.module.ngfactory":[699,0],"../pages/login/login.module.ngfactory":[701,20],"../pages/search/search-popover.module.ngfactory":[702,14],"../pages/search/search.module.ngfactory":[703,1],"../pages/settings/settings.module.ngfactory":[704,18],"../pages/settings/update-popover.module.ngfactory":[705,23],"../pages/story-detail/story-detail.module.ngfactory":[706,9],"../pages/story-related/story-related.module.ngfactory":[707,5],"../pages/story-series/story-series.module.ngfactory":[708,4],"../pages/story-view/story-popover.module.ngfactory":[710,16],"../pages/story-view/story-view.module.ngfactory":[709,8],"../pages/tabs/tabs.module.ngfactory":[711,22],"../pages/top-list/top-list.module.ngfactory":[713,3],"../parts/bookmark-popover/bookmark-popover.module.ngfactory":[712,11],"../parts/export-popover/export-popover.module.ngfactory":[715,17],"../parts/sort-popover/sort-popover.module.ngfactory":[714,15]};r.keys=function(){return Object.keys(o)},r.id=293,t.exports=r},32:function(t,e,n){"use strict";n.d(e,"a",function(){return o});n(0),n(44),n(34);var r=n(54),o=(n.n(r),function(){function t(t,e,n){this.translate=t,this.loadingCtrl=e,this.toastCtrl=n,this.activeToasts=[],this.offlineModeErrorCount=0}return t.prototype.showLoader=function(){var t=this;return this.loader?this.loader:(this.loader=this.loadingCtrl.create({spinner:"crescent"}),this.loader.present(),this.loader.onDidDismiss(function(){t.loader=void 0}),this.loader)},t.prototype.updateLoader=function(t){this.loader&&this.loader.setContent(t)},t.prototype.hideLoader=function(){this.loader&&this.loader.dismiss().catch(function(){})},t.prototype.showToast=function(t,e,n,r,o,s){var i=this;void 0===t&&(t="ERROR");var a=t+"_TAG";return new Promise(function(u){i.translate.get([e||"LOAD_ERROR",r||"CLOSE_BUTTON",a]).subscribe(function(l){var c=i.toastCtrl.create({message:l[a]+(l[e]||e||l.LOAD_ERROR),showCloseButton:!0,closeButtonText:l[r]||r||l.CLOSE_BUTTON,duration:n||3e3,cssClass:s?"overui":""});c.present(),c.onDidDismiss(function(t,e){"close"===e&&(u(c),i.activeToasts.splice(i.activeToasts.indexOf(c),1))}),o||"ERROR"===t&&!e?(i.activeToasts.forEach(function(t){return t.dismiss()}),i.activeToasts=[c]):i.activeToasts.push(c)})})},t.prototype.showOfflineModeError=function(){return this.offlineModeErrorCount<3&&(this.showToast("ERROR","OFFLINE_ERROR",void 0,void 0,!0),this.offlineModeErrorCount=this.offlineModeErrorCount+1),this.hideLoader(),r.Observable.of()},t}())},36:function(t,e,n){"use strict";n.d(e,"a",function(){return u});n(0);var r=n(159),o=n(379),s=(n(45),n(32),n(2)),i=(n.n(s),this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}),a=function(){function t(){}return t.prototype.encodeKey=function(t){return encodeURIComponent(t)},t.prototype.encodeValue=function(t){return encodeURIComponent(t)},t.prototype.decodeKey=function(t){return decodeURIComponent(t)},t.prototype.decodeValue=function(t){return decodeURIComponent(t)},t}(),u=function(){function t(t,e,n){this.http=t,this.ux=e,this.settings=n,this.apikey="70b3a71911b398a98d3dac695f34cf279c270ea0",this.appid="24b7c3f9d904ebd679299b1ce5506bc305a5ab40",this.corsProxy=o.a.CORS_PROXY||"",this.urls=this.getUrls();try{var r=location.search.substring(1),s=JSON.parse('{"'+decodeURI(r).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}');s.proxy&&(this.corsProxy=s.proxy,this.urls=this.getUrls())}catch(t){}}return t.prototype.getUrls=function(){return[this.corsProxy+"https://literotica.com/api",this.corsProxy+"https://search.literotica.com/api",this.corsProxy+"https://www.literotica.com",this.corsProxy+"https://raw.githubusercontent.com/theilluminatus/litapp/master",this.corsProxy+"https://literotica.com",this.corsProxy+"https://api.github.com"]},t.prototype.handleAPIError=function(t,e,n,r){return console.error(i({type:"API_Error",url:e,method:r,data:n},t)),404===t.status?this.ux.showToast("ERROR","LITEROTICA_NOTFOUND",5e3):429===t.status?this.ux.showToast("ERROR","LITEROTICA_TOOMANYREQUESTS",5e3):503===t.status&&this.ux.showToast("ERROR","LITEROTICA_TEMPOFFLINE",5e3),s.Observable.of()},t.prototype.get=function(t,e,n,o,s){var i=this;if(this.settings.allSettings.offlineMode)return this.ux.showOfflineModeError();var u=n;if(n||(u={params:new r.g({encoder:new a})}),e){u.params=new r.g({encoder:new a});for(var l in e)u.params=u.params.set(l,e[l])}3!==o&&5!==o&&(u.withCredentials=!0,u.params=u.params.set("apikey",this.apikey),u.params=u.params.set("appid",this.appid));var c=this.urls[o||0]+"/"+t,p=this.http.get(c,u).catch(function(t){return i.handleAPIError(t,c,u.params,"GET")});return s?p.timeout(s):p},t.prototype.post=function(t,e,n,r,o){var s=this;if(this.settings.allSettings.offlineMode)return this.ux.showOfflineModeError();var i=t;r&&(t.indexOf("?")>-1?i+="&apikey="+this.apikey+"&appid="+this.appid:i+="?apikey="+this.apikey+"&appid="+this.appid);var a=this.urls[o||0]+"/"+i;return this.http.post(a,e,n).catch(function(t){return s.handleAPIError(t,a,e,"POST")})},t.prototype.put=function(t,e,n){var r=this;if(this.settings.allSettings.offlineMode)return this.ux.showOfflineModeError();var o=this.urls[0]+"/"+t;return this.http.put(o,e,n).catch(function(t){return r.handleAPIError(t,o,e,"PUT")})},t.prototype.delete=function(t,e,n){var r=this;if(this.settings.allSettings.offlineMode)return this.ux.showOfflineModeError();var o=this.urls[n||0]+"/"+t;return this.http.delete(o,e).catch(function(t){return r.handleAPIError(t,o,{},"DELETE")})},t.prototype.patch=function(t,e,n){var r=this;if(this.settings.allSettings.offlineMode)return this.ux.showOfflineModeError();var o=this.urls[0]+"/"+t;return this.http.patch(o,e,n).catch(function(t){return r.handleAPIError(t,o,e,"PATCH")})},t}()},379:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={CORS_PROXY:"https://litapp-cors.herokuapp.com/",DEV:!1}},404:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(t){for(var e in t)this[e]=t[e]}}()},408:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(t){for(var e in t)this[e]=t[e]}}()},409:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(t){for(var e in t)this[e]=t[e]}}()},413:function(t,e,n){"use strict";function r(t){return o._22(0,[(t()(),o._20(-1,null,["\n    "])),(t()(),o.Z(1,0,null,null,21,"div",[["class","main"]],null,null,null,null,null)),(t()(),o._20(-1,null,["\n      "])),(t()(),o.Z(3,0,null,null,2,"h2",[],null,null,null,null,null)),(t()(),o._20(4,null,[""," v",""])),o._14(131072,s.a,[i.a,o.g]),(t()(),o._20(-1,null,["\n\n      "])),(t()(),o.Z(7,0,null,null,1,"pre",[],null,null,null,null,null)),(t()(),o._20(8,null,["        ","\n      "])),(t()(),o._20(-1,null,["\n\n      "])),(t()(),o.Z(10,0,null,null,11,"div",[],null,null,null,null,null)),(t()(),o._20(-1,null,["\n        "])),(t()(),o.Z(12,0,null,null,3,"button",[["color","light"],["ion-button",""]],null,[[null,"click"]],function(t,e,n){var r=!0;if("click"===e){r=!1!==t.component.cancel()&&r}return r},a.b,a.a)),o.Y(13,1097728,null,0,u.a,[[8,""],l.a,o.j,o.z],{color:[0,"color"]},null),(t()(),o._20(14,0,["",""])),o._14(131072,s.a,[i.a,o.g]),(t()(),o._20(-1,null,["\n        "])),(t()(),o.Z(17,0,null,null,3,"button",[["ion-button",""]],null,[[null,"click"]],function(t,e,n){var r=!0;if("click"===e){r=!1!==t.component.update()&&r}return r},a.b,a.a)),o.Y(18,1097728,null,0,u.a,[[8,""],l.a,o.j,o.z],null,null),(t()(),o._20(19,0,["",""])),o._14(131072,s.a,[i.a,o.g]),(t()(),o._20(-1,null,["\n      "])),(t()(),o._20(-1,null,["\n    "])),(t()(),o._20(-1,null,["\n  "]))],function(t,e){t(e,13,0,"light")},function(t,e){var n=e.component;t(e,4,0,o._21(e,4,0,o._13(e,5).transform("SETTINGS_UPDATE_TITLE")),n.data.versionName);t(e,8,0,n.changelog);t(e,14,0,o._21(e,14,0,o._13(e,15).transform("CANCEL_BUTTON")));t(e,19,0,o._21(e,19,0,o._13(e,20).transform("DOWNLOAD_BUTTON")))})}n.d(e,"a",function(){return m});var o=n(1),s=n(86),i=n(39),a=n(61),u=n(29),l=n(3),c=n(153),p=n(15),h=n(7),d=n(95),f=n(36),g=o.X({encapsulation:0,styles:[".main[_ngcontent-%COMP%] {\n        padding: 20px;\n      }\n\n      pre[_ngcontent-%COMP%] {\n        min-height: 180px;\n        white-space: pre-line;\n        overflow-y: auto;\n        max-height: 40vh;\n      }"],data:{}}),m=o.V("update-popover",c.a,function(t){return o._22(0,[(t()(),o.Z(0,0,null,null,1,"update-popover",[],null,null,null,r,g)),o.Y(1,49152,null,0,c.a,[p.a,h.a,d.a,f.a],null,null)],null,null)},{},{},[])},414:function(t,e,n){"use strict";function r(t){return new T.a(t,"./assets/i18n/",".json")}function o(t){return new k.a(t,{checkforfeedupdates:!0,checkforappupdates:!0,cachelists:!0,amoledBlackTheme:!1,offlineMode:!1,enableLock:!1,forceNormalList:!1,alternatePagination:!1,onlyShowStoriesInFeed:!1,navigateWithVolumeRocker:!1,defaultLanguage:1})}function s(t){return c._22(0,[(t()(),c.Z(0,0,null,null,8,"button",[["class","item item-block"],["ion-item",""],["menuClose",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;if("click"===e){r=!1!==c._13(t,6).close()&&r}if("click"===e){r=!1!==o.openLinkDialog()&&r}return r},W.b,W.a)),c.Y(1,1097728,null,3,X.a,[G.a,K.a,c.j,c.z,[2,J.a]],null,null),c._18(335544320,7,{contentLabel:0}),c._18(603979776,8,{_buttons:1}),c._18(603979776,9,{_icons:1}),c.Y(5,16384,null,0,Q.a,[],null,null),c.Y(6,16384,null,0,$.a,[tt.a],{menuClose:[0,"menuClose"]},null),(t()(),c._20(7,2,["\n              ","\n            "])),c._14(131072,et.a,[nt.a,c.g])],function(t,e){t(e,6,0,"")},function(t,e){t(e,7,0,c._21(e,7,0,c._13(e,8).transform("MENU_OPENLINK")))})}function i(t){return c._22(0,[(t()(),c.Z(0,0,null,null,8,"button",[["class","item item-block"],["ion-item",""],["menuClose",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;if("click"===e){r=!1!==c._13(t,6).close()&&r}if("click"===e){r=!1!==o.openPage("AccountPage")&&r}return r},W.b,W.a)),c.Y(1,1097728,null,3,X.a,[G.a,K.a,c.j,c.z,[2,J.a]],null,null),c._18(335544320,10,{contentLabel:0}),c._18(603979776,11,{_buttons:1}),c._18(603979776,12,{_icons:1}),c.Y(5,16384,null,0,Q.a,[],null,null),c.Y(6,16384,null,0,$.a,[tt.a],{menuClose:[0,"menuClose"]},null),(t()(),c._20(7,2,["\n              ","\n            "])),c._14(131072,et.a,[nt.a,c.g])],function(t,e){t(e,6,0,"")},function(t,e){t(e,7,0,c._21(e,7,0,c._13(e,8).transform("MENU_ACCOUNT")))})}function a(t){return c._22(0,[(t()(),c.Z(0,0,null,null,60,null,null,null,null,null,null,null)),(t()(),c._20(-1,null,["\n      "])),(t()(),c.Z(2,0,null,null,53,"ion-menu",[["role","navigation"]],null,null,null,rt.b,rt.a)),c._17(6144,null,ot.a,null,[st.a]),c.Y(4,245760,null,2,st.a,[tt.a,c.j,K.a,it.a,c.z,at.a,ut.l,lt.a,ct.a],{content:[0,"content"]},null),c._18(335544320,2,{menuContent:0}),c._18(335544320,3,{menuNav:0}),(t()(),c._20(-1,0,["\n        "])),(t()(),c.Z(8,0,null,0,12,"ion-header",[],null,null,null,null,null)),c.Y(9,16384,null,0,pt.a,[K.a,c.j,c.z,[2,ht.a]],null,null),(t()(),c._20(-1,null,["\n          "])),(t()(),c.Z(11,0,null,null,8,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,dt.b,dt.a)),c.Y(12,49152,null,0,ft.a,[K.a,c.j,c.z],null,null),(t()(),c._20(-1,3,["\n            "])),(t()(),c.Z(14,0,null,3,4,"ion-title",[],null,null,null,gt.b,gt.a)),c.Y(15,49152,null,0,mt.a,[K.a,c.j,c.z,[2,ft.a],[2,yt.a]],null,null),(t()(),c._20(-1,0,["Literotica "])),(t()(),c.Z(17,0,null,0,1,"small",[],null,null,null,null,null)),(t()(),c._20(-1,null,["(unofficial)"])),(t()(),c._20(-1,3,["\n          "])),(t()(),c._20(-1,null,["\n        "])),(t()(),c._20(-1,0,["\n\n        "])),(t()(),c.Z(22,0,null,0,32,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,vt.b,vt.a)),c.Y(23,4374528,[[2,4]],0,_t.a,[K.a,it.a,lt.a,c.j,c.z,ct.a,at.a,c.u,[2,ht.a],[2,wt.a]],null,null),(t()(),c._20(-1,1,["\n          "])),(t()(),c.Z(25,0,null,1,28,"ion-list",[],null,null,null,null,null)),c.Y(26,16384,null,0,bt.a,[K.a,c.j,c.z,it.a,ut.l,lt.a],null,null),(t()(),c._20(-1,null,["\n            "])),(t()(),c.Z(28,0,null,null,8,"button",[["class","item item-block"],["ion-item",""],["menuClose",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;if("click"===e){r=!1!==c._13(t,34).close()&&r}if("click"===e){r=!1!==o.openPage("TabsPage")&&r}return r},W.b,W.a)),c.Y(29,1097728,null,3,X.a,[G.a,K.a,c.j,c.z,[2,J.a]],null,null),c._18(335544320,4,{contentLabel:0}),c._18(603979776,5,{_buttons:1}),c._18(603979776,6,{_icons:1}),c.Y(33,16384,null,0,Q.a,[],null,null),c.Y(34,16384,null,0,$.a,[tt.a],{menuClose:[0,"menuClose"]},null),(t()(),c._20(35,2,["\n              ","\n            "])),c._14(131072,et.a,[nt.a,c.g]),(t()(),c._20(-1,null,["\n\n            "])),(t()(),c.U(16777216,null,null,1,null,s)),c.Y(39,16384,null,0,Ot.j,[c.I,c.F],{ngIf:[0,"ngIf"]},null),(t()(),c._20(-1,null,["\n\n            "])),(t()(),c.U(16777216,null,null,1,null,i)),c.Y(42,16384,null,0,Ot.j,[c.I,c.F],{ngIf:[0,"ngIf"]},null),(t()(),c._20(-1,null,["\n\n            "])),(t()(),c.Z(44,0,null,null,8,"button",[["class","item item-block"],["ion-item",""],["menuClose",""]],null,[[null,"click"]],function(t,e,n){var r=!0,o=t.component;if("click"===e){r=!1!==c._13(t,50).close()&&r}if("click"===e){r=!1!==o.openPage("SettingsPage")&&r}return r},W.b,W.a)),c.Y(45,1097728,null,3,X.a,[G.a,K.a,c.j,c.z,[2,J.a]],null,null),c._18(335544320,13,{contentLabel:0}),c._18(603979776,14,{_buttons:1}),c._18(603979776,15,{_icons:1}),c.Y(49,16384,null,0,Q.a,[],null,null),c.Y(50,16384,null,0,$.a,[tt.a],{menuClose:[0,"menuClose"]},null),(t()(),c._20(51,2,["\n              ","\n            "])),c._14(131072,et.a,[nt.a,c.g]),(t()(),c._20(-1,null,["\n          "])),(t()(),c._20(-1,1,["\n        "])),(t()(),c._20(-1,0,["\n      "])),(t()(),c._20(-1,null,["\n      "])),(t()(),c.Z(57,0,null,null,2,"ion-nav",[["root","TabsPage"]],null,null,null,Tt.b,Tt.a)),c._17(6144,null,ot.a,null,[St.a]),c.Y(59,4374528,[[1,4],["content",4]],0,St.a,[[2,ht.a],[2,wt.a],ct.a,K.a,it.a,c.j,c.u,c.z,c.i,ut.l,xt.a,[2,Pt.a],lt.a,c.k],{root:[0,"root"]},null),(t()(),c._20(-1,null,["\n    "]))],function(t,e){var n=e.component;t(e,4,0,c._13(e,59));t(e,34,0,"");t(e,39,0,!n.settings.allSettings.offlineMode);t(e,42,0,!n.settings.allSettings.offlineMode);t(e,50,0,"");t(e,59,0,"TabsPage")},function(t,e){t(e,11,0,c._13(e,12)._sbPadding);t(e,22,0,c._13(e,23).statusbarPadding,c._13(e,23)._hasRefresher);t(e,35,0,c._21(e,35,0,c._13(e,36).transform("MENU_HOME")));t(e,51,0,c._21(e,51,0,c._13(e,52).transform("MENU_SETTINGS")))})}function u(t){return c._22(0,[c._18(671088640,1,{nav:0}),(t()(),c._20(-1,null,["\n    "])),(t()(),c.U(16777216,null,null,1,null,a)),c.Y(3,16384,null,0,Ot.j,[c.I,c.F],{ngIf:[0,"ngIf"]},null),(t()(),c._20(-1,null,["\n  "]))],function(t,e){t(e,3,0,e.component.loggedIn)},null)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(49),c=n(1),p=(n(0),n(159)),h=n(256),d=n(222),f=n(95),g=n(213),m=n(223),y=n(224),v=n(260),_=n(104),w=n(261),b=n(41),O=n(34),T=n(427),S=(n(44),n(148)),x=n(232),P=n(147),E=n(185),I=n(127),L=n(178),N=n(233),C=n(128),k=n(129),A=function(){function t(t,e,n,r,o,s,i,a,u,l,c,p,h,d,f){var g=this;this.platform=t,this.app=e,this.translate=n,this.webIntent=r,this.config=o,this.alertCtrl=s,this.settings=i,this.analytics=a,this.ux=u,this.g=l,this.s=c,this.l=p,this.f=h,this.faio=d,this.statusBar=f,this.loggedIn=!1,this.initTranslate(),this.settings.load().then(function(){if(!g.settings.allSettings.enableLock||g.loggedIn||g.g.isWebApp()?g.loggedIn=!0:g.showLockScreen(),!g.settings.allSettings.checkforappupdates||g.settings.allSettings.offlineMode||g.g.isWebApp()||g.g.checkForUpdates(),g.settings.allSettings.amoledBlackTheme){var t=document.createElement("link");t.setAttribute("href","./assets/black-theme.css"),t.setAttribute("rel","stylesheet"),document.head.appendChild(t),g.statusBar.backgroundColorByHexString("#000")}else g.statusBar.backgroundColorByHexString("#111")}),this.catchShareIntent(),this.platform.resume.subscribe(function(){g.catchShareIntent()})}return t.prototype.showLockScreen=function(){var t=this;this.faio.isAvailable().then(function(e){e?t.faio.show({clientId:"litapp",clientSecret:"3}D+v862s4a6c>y5elLFj4xA",disableBackup:!1}).then(function(e){e&&(t.loggedIn=e)}).catch(function(){return t.platform.exitApp()}):t.loggedIn=!0}).catch(function(){return t.loggedIn=!0})},t.prototype.catchShareIntent=function(){var t=this;this.g.isWebApp()||this.webIntent.getIntent().then(function(e){"android.intent.action.SEND"===e.action&&e.extras&&t.openURL(e.extras["android.intent.extra.TEXT"])}).catch(function(t){return console.warn("Native: tried webIntent:",t)})},t.prototype.initTranslate=function(){var t=this;this.translate.setDefaultLang("en");var e=this.translate.getBrowserLang();if(e)if("zh"===e){var n=this.translate.getBrowserCultureLang();n.match(/-CN|CHS|Hans/i)?this.translate.use("zh-cmn-Hans"):n.match(/-TW|CHT|Hant/i)&&this.translate.use("zh-cmn-Hant")}else this.translate.use(this.translate.getBrowserLang());else this.translate.use("en");this.translate.get(["BACK_BUTTON_TEXT"]).subscribe(function(e){t.config.set("ios","backButtonText",e.BACK_BUTTON_TEXT)})},t.prototype.openPage=function(t){"TabsPage"===t.title?this.nav.setRoot(t):this.nav.push(t)},t.prototype.openLinkDialog=function(t){var e=this;this.translate.get(["MENU_OPENLINK","OPENLINK_DESCRIPTION","OK_BUTTON","CANCEL_BUTTON"]).subscribe(function(t){e.alertCtrl.create({title:t.MENU_OPENLINK,message:t.OPENLINK_DESCRIPTION,inputs:[{name:"url",placeholder:"https://www.literotica.com/..."}],buttons:[{text:t.OK_BUTTON,handler:function(t){e.openURL(t.url)}},{text:t.CANCEL_BUTTON}]}).present()})},t.prototype.openURL=function(t){var e=/literotica\.com\/s\/([-a-zA-Z0-9._+]*)/g.exec(t);if(e)return this.nav.push("SearchPage",{storyurl:e[1]}),void this.ux.showToast("INFO","OPENLINK_STORYWARNING",2500);var n=/literotica\.com\/stories\/memberpage\.php\?.*uid=([0-9]*)/g.exec(t);if(n){this.nav.push("AuthorPage",{author:{id:n[1]}})}else{var r=/literotica\.com\/p\/([-a-zA-Z0-9._+]*)/g.exec(t);this.ux.showToast("INFO",r?"OPENLINK_UNSUPPORTED_POEM":"OPENLINK_UNSUPPORTED",2500)}},t}(),R=n(240),F=function(){return function(){}}(),M=n(79),D=n(391),U=n(392),j=n(393),B=n(394),H=n(395),Y=n(396),z=n(397),Z=n(398),q=n(399),V=n(413),W=n(198),X=n(26),G=n(23),K=n(3),J=n(62),Q=n(87),$=n(176),tt=n(35),et=n(86),nt=n(39),rt=n(412),ot=n(48),st=n(98),it=n(6),at=n(40),ut=n(10),lt=n(12),ct=n(13),pt=n(133),ht=n(7),dt=n(410),ft=n(57),gt=n(400),mt=n(92),yt=n(55),vt=n(401),_t=n(31),wt=n(30),bt=n(67),Ot=n(18),Tt=n(411),St=n(71),xt=n(47),Pt=n(24),Et=n(96),It=n(45),Lt=n(145),Nt=n(32),Ct=n(70),kt=n(64),At=n(137),Rt=n(146),Ft=c.X({encapsulation:2,styles:[],data:{}}),Mt=c.V("ng-component",A,function(t){return c._22(0,[(t()(),c.Z(0,0,null,null,1,"ng-component",[],null,null,null,u,Ft)),c.Y(1,49152,null,0,A,[it.a,ct.a,nt.a,I.a,K.a,Et.a,It.a,Lt.a,Nt.a,Ct.a,kt.a,At.a,Rt.a,C.a,_.a],null,null)],null,null)},{},{},[]),Dt=n(187),Ut=n(257),jt=n(136),Bt=n(28),Ht=n(88),Yt=n(89),zt=n(91),Zt=n(90),qt=n(130),Vt=n(172),Wt=n(186),Xt=n(46),Gt=n(135),Kt=n(199),Jt=n(81),Qt=n(63),$t=n(191),te=n(111),ee=n(131),ne=n(189),re=n(196),oe=n(211),se=n(36),ie=n(56),ae=n(97),ue=n(212),le=n(227),ce=n(218),pe=n(390),he=n(188),de=n(177),fe=n(190),ge=n(153),me=c.W(F,[M.b],function(t){return c._10([c._11(512,c.i,c.S,[[8,[D.a,U.a,j.a,B.a,H.a,Y.a,z.a,Z.a,q.a,V.a,Mt]],[3,c.i],c.s]),c._11(5120,c.r,c._9,[[3,c.r]]),c._11(4608,Ot.l,Ot.k,[c.r,[2,Ot.t]]),c._11(5120,c.b,c._0,[]),c._11(5120,c.p,c._6,[]),c._11(5120,c.q,c._7,[]),c._11(4608,l.c,l.q,[Ot.c]),c._11(6144,c.D,null,[l.c]),c._11(4608,l.f,Dt.a,[]),c._11(5120,l.d,function(t,e,n,r,o){return[new l.k(t,e),new l.o(n),new l.n(r,o)]},[Ot.c,c.u,Ot.c,Ot.c,l.f]),c._11(4608,l.e,l.e,[l.d,c.u]),c._11(135680,l.m,l.m,[Ot.c]),c._11(4608,l.l,l.l,[l.e,l.m]),c._11(5120,Ut.a,h.d,[]),c._11(5120,Ut.c,h.e,[]),c._11(4608,Ut.b,h.c,[Ut.a,Ut.c]),c._11(5120,c.B,h.f,[l.l,Ut.b,c.u]),c._11(6144,l.p,null,[l.m]),c._11(4608,c.G,c.G,[c.u]),c._11(4608,l.h,l.h,[Ot.c]),c._11(4608,l.i,l.i,[Ot.c]),c._11(4608,jt.b,h.b,[c.B,l.b]),c._11(4608,p.i,p.n,[Ot.c,c.w,p.l]),c._11(4608,p.o,p.o,[p.i,p.m]),c._11(5120,p.a,function(t){return[t]},[p.o]),c._11(4608,p.k,p.k,[]),c._11(6144,p.j,null,[p.k]),c._11(4608,p.h,p.h,[p.j]),c._11(6144,p.b,null,[p.h]),c._11(5120,p.f,p.p,[p.b,[2,p.a]]),c._11(4608,p.c,p.c,[p.f]),c._11(4608,Bt.r,Bt.r,[]),c._11(4608,Bt.d,Bt.d,[]),c._11(5120,Ht.b,r,[p.c]),c._11(4608,Yt.a,Yt.b,[]),c._11(4608,zt.b,zt.a,[]),c._11(4608,Zt.b,Zt.a,[]),c._11(4608,qt.a,qt.a,[]),c._11(4608,nt.a,nt.a,[qt.a,Ht.b,Yt.a,zt.b,Zt.b,nt.b,nt.c]),c._11(4608,Vt.a,Vt.a,[ct.a,K.a]),c._11(4608,Et.a,Et.a,[ct.a,K.a]),c._11(4608,Wt.a,Wt.a,[]),c._11(4608,G.a,G.a,[]),c._11(4608,Xt.a,Xt.a,[it.a]),c._11(4608,at.a,at.a,[K.a,it.a,c.u,lt.a]),c._11(4608,Gt.a,Gt.a,[ct.a,K.a]),c._11(5120,Ot.g,Kt.c,[Ot.r,[2,Ot.a],K.a]),c._11(4608,Ot.f,Ot.f,[Ot.g]),c._11(5120,Jt.b,Jt.d,[ct.a,Jt.a]),c._11(5120,Pt.a,Pt.b,[ct.a,Jt.b,Ot.f,Qt.b,c.i]),c._11(4608,$t.a,$t.a,[ct.a,K.a,Pt.a]),c._11(4608,te.a,te.a,[ct.a,K.a]),c._11(4608,ee.a,ee.a,[ct.a,K.a,Pt.a]),c._11(4608,ne.a,ne.a,[K.a,it.a,lt.a,ct.a,ut.l]),c._11(4608,re.a,re.a,[ct.a,K.a]),c._11(4608,xt.a,xt.a,[it.a,K.a]),c._11(5120,oe.a,oe.c,[oe.b]),c._11(4608,Nt.a,Nt.a,[nt.a,Gt.a,re.a]),c._11(5120,It.a,o,[oe.a]),c._11(4608,se.a,se.a,[p.c,Nt.a,It.a]),c._11(4608,ie.a,ie.a,[se.a,It.a,oe.a,nt.a,Nt.a]),c._11(4608,Ct.a,Ct.a,[se.a,it.a,ie.a,oe.a,nt.a,Nt.a,ee.a]),c._11(4608,L.a,L.a,[]),c._11(4608,Lt.a,Lt.a,[Ct.a,It.a,L.a]),c._11(4608,ae.a,ae.a,[se.a,ie.a,Gt.a,Nt.a]),c._11(4608,kt.a,kt.a,[se.a,ae.a,ie.a,Ct.a,oe.a,nt.a,Et.a,Nt.a]),c._11(4608,ue.a,ue.a,[se.a,nt.a]),c._11(4608,At.a,At.a,[se.a,kt.a,It.a,ie.a,oe.a,Nt.a]),c._11(4608,Rt.a,Rt.a,[se.a,kt.a,ae.a,ie.a,It.a,oe.a,Nt.a]),c._11(4608,le.a,le.a,[kt.a,oe.a]),c._11(4608,S.a,S.a,[]),c._11(4608,P.a,P.a,[]),c._11(4608,E.a,E.a,[]),c._11(4608,ce.a,ce.a,[Nt.a,S.a,P.a,E.a,nt.a]),c._11(4608,d.a,d.a,[]),c._11(4608,f.a,f.a,[]),c._11(4608,g.a,g.a,[]),c._11(4608,m.a,m.a,[]),c._11(4608,y.a,y.a,[]),c._11(4608,v.a,v.a,[]),c._11(4608,_.a,_.a,[]),c._11(4608,w.a,w.a,[]),c._11(4608,x.a,x.a,[]),c._11(4608,I.a,I.a,[]),c._11(4608,N.a,N.a,[]),c._11(4608,C.a,C.a,[]),c._11(512,Ot.b,Ot.b,[]),c._11(512,c.k,pe.a,[]),c._11(256,K.b,{preloadModules:!0},[]),c._11(1024,he.a,he.b,[]),c._11(1024,it.a,it.b,[l.b,he.a,c.u]),c._11(1024,K.a,K.c,[K.b,it.a]),c._11(512,lt.a,lt.a,[it.a]),c._11(512,tt.a,tt.a,[]),c._11(512,ct.a,ct.a,[K.a,it.a,[2,tt.a]]),c._11(512,ut.l,ut.l,[ct.a]),c._11(256,Jt.a,{links:[{loadChildren:"../pages/account/account.module.ngfactory#AccountPageModuleNgFactory",name:"AccountPage",segment:"account",priority:"low",defaultHistory:[]},{loadChildren:"../pages/author/author.module.ngfactory#AuthorPageModuleNgFactory",name:"AuthorPage",segment:"author",priority:"low",defaultHistory:[]},{loadChildren:"../pages/explore/explore.module.ngfactory#ExplorePageModuleNgFactory",name:"ExplorePage",segment:"explore",priority:"high",defaultHistory:[]},{loadChildren:"../pages/feed/feed.module.ngfactory#FeedPageModuleNgFactory",name:"FeedPage",segment:"feed",priority:"high",defaultHistory:[]},{loadChildren:"../pages/following/following.module.ngfactory#FollowingPageModuleNgFactory",name:"FollowingPage",segment:"following",priority:"low",defaultHistory:[]},{loadChildren:"../pages/history/history.module.ngfactory#HistoryPageModuleNgFactory",name:"HistoryPage",segment:"history",priority:"high",defaultHistory:[]},{loadChildren:"../pages/list-list/list-list.module.ngfactory#ListListPageModuleNgFactory",name:"ListListPage",segment:"list-list",priority:"high",defaultHistory:[]},{loadChildren:"../pages/list-view/list-view.module.ngfactory#ListViewPageModuleNgFactory",name:"ListViewPage",segment:"list-view",priority:"low",defaultHistory:[]},{loadChildren:"../pages/list-create/list-create.module.ngfactory#ListCreatePageModuleNgFactory",name:"ListCreatePage",segment:"list-create",priority:"low",defaultHistory:[]},{loadChildren:"../pages/login/login.module.ngfactory#LoginPageModuleNgFactory",name:"LoginPage",segment:"login",priority:"low",defaultHistory:[]},{loadChildren:"../pages/search/search-popover.module.ngfactory#SearchPopoverModuleNgFactory",name:"SearchPopover",segment:"search-popover",priority:"low",defaultHistory:[]},{loadChildren:"../pages/search/search.module.ngfactory#SearchPageModuleNgFactory",name:"SearchPage",segment:"search",priority:"high",defaultHistory:[]},{loadChildren:"../pages/settings/settings.module.ngfactory#SettingsPageModuleNgFactory",name:"SettingsPage",segment:"settings",priority:"low",defaultHistory:[]},{loadChildren:"../pages/settings/update-popover.module.ngfactory#UpdatePopoverModuleNgFactory",name:"UpdatePopover",segment:"update-popover",priority:"low",defaultHistory:[]},{loadChildren:"../pages/story-detail/story-detail.module.ngfactory#StoryDetailPageModuleNgFactory",name:"StoryDetailPage",segment:"story-detail",priority:"low",defaultHistory:[]},{loadChildren:"../pages/story-related/story-related.module.ngfactory#StoryRelatedPageModuleNgFactory",name:"StoryRelatedPage",segment:"story-related",priority:"low",defaultHistory:[]},{loadChildren:"../pages/story-series/story-series.module.ngfactory#StorySeriesPageModuleNgFactory",name:"StorySeriesPage",segment:"story-series",priority:"low",defaultHistory:[]},{loadChildren:"../pages/story-view/story-view.module.ngfactory#StoryViewPageModuleNgFactory",name:"StoryViewPage",segment:"story-view",priority:"low",defaultHistory:[]},{loadChildren:"../pages/story-view/story-popover.module.ngfactory#StoryPopoverModuleNgFactory",name:"StoryPopover",segment:"story-popover",priority:"low",defaultHistory:[]},{loadChildren:"../pages/tabs/tabs.module.ngfactory#TabsPageModuleNgFactory",name:"TabsPage",segment:"tabs",priority:"high",defaultHistory:[]},{loadChildren:"../parts/bookmark-popover/bookmark-popover.module.ngfactory#BookmarkPopoverModuleNgFactory",name:"BookmarkPopover",segment:"bookmark-popover",priority:"low",defaultHistory:[]},{loadChildren:"../pages/top-list/top-list.module.ngfactory#TopListPageModuleNgFactory",name:"TopListPage",segment:"top-list",priority:"low",defaultHistory:[]},{loadChildren:"../parts/sort-popover/sort-popover.module.ngfactory#SortPopoverModuleNgFactory",name:"SortPopover",segment:"sort-popover",priority:"low",defaultHistory:[]},{loadChildren:"../parts/export-popover/export-popover.module.ngfactory#ExportPopoverModuleNgFactory",name:"ExportPopover",segment:"export-popover",priority:"low",defaultHistory:[]}]},[]),c._11(512,c.h,c.h,[]),c._11(512,de.a,de.a,[c.h]),c._11(1024,Qt.b,Qt.c,[de.a,c.o]),c._11(1024,c.c,function(t,e,n,r,o,s,i,a,u,c,p,h,d){return[l.s(t),fe.a(e),Wt.b(n,r),ne.b(o,s,i,a,u),Qt.d(c,p,h,d)]},[[2,c.t],K.a,it.a,lt.a,K.a,it.a,lt.a,ct.a,ut.l,K.a,Jt.a,Qt.b,c.u]),c._11(512,c.d,c.d,[[2,c.c]]),c._11(131584,c.f,c.f,[c.u,c.T,c.o,c.k,c.i,c.d]),c._11(512,c.e,c.e,[c.f]),c._11(512,l.a,l.a,[[3,l.a]]),c._11(512,h.a,h.a,[]),c._11(512,p.e,p.e,[]),c._11(512,p.d,p.d,[]),c._11(512,O.a,O.a,[]),c._11(512,Bt.p,Bt.p,[]),c._11(512,Bt.g,Bt.g,[]),c._11(512,Bt.n,Bt.n,[]),c._11(512,Kt.a,Kt.a,[]),c._11(512,b.a,b.a,[]),c._11(512,Kt.b,Kt.b,[]),c._11(512,R.a,R.a,[]),c._11(512,F,F,[]),c._11(256,p.l,"XSRF-TOKEN",[]),c._11(256,p.m,"X-XSRF-TOKEN",[]),c._11(256,Qt.a,ge.a,[]),c._11(256,nt.c,void 0,[]),c._11(256,nt.b,void 0,[]),c._11(256,M.a,A,[]),c._11(256,Ot.a,"/",[]),c._11(256,oe.b,null,[])])}),ye=this;window.consoleLog=[],window.Proxy&&(console=new Proxy(console,{get:function(t,e){var n=t[e];return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=n.apply(ye,t);try{window.consoleLog.push(JSON.parse(JSON.stringify({prop:e,args:t}))),window.consoleLog.length>75&&window.consoleLog.shift()}catch(t){}return o}}})),console.info("App started",(new Date).getTime()),Object(c.M)(),Object(l.j)().bootstrapModuleFactory(me)},45:function(t,e,n){"use strict";n.d(e,"a",function(){return o});n(0),n(41);var r=n(58),o=function(){function t(t,e){this.storage=t,this.settings={},this._defaults=e}return t.prototype.load=function(){var t=this;return this.storage.get(r.f).then(function(e){return e?(t.settings=e,t._mergeDefaults(t._defaults)):t.setAll(t._defaults).then(function(e){t.settings=e})})},t.prototype._mergeDefaults=function(t){for(var e in t)e in this.settings||(this.settings[e]=t[e]);return this.setAll(this.settings)},t.prototype.merge=function(t){for(var e in t)this.settings[e]=t[e];return this.save()},t.prototype.setValue=function(t,e){return this.settings[t]=e,this.storage.set(r.f,this.settings)},t.prototype.setAll=function(t){return this.storage.set(r.f,t)},t.prototype.getValue=function(t){return this.storage.get(r.f).then(function(e){return e[t]})},t.prototype.save=function(){return this.setAll(this.settings)},Object.defineProperty(t.prototype,"allSettings",{get:function(){return this.settings},enumerable:!0,configurable:!0}),t}()},56:function(t,e,n){"use strict";n.d(e,"a",function(){return a});n(0);var r=n(54),o=(n.n(r),n(367)),s=(n.n(o),n(691)),i=(n.n(s),n(41),n(34),n(58)),a=(n(36),n(45),n(32),function(){function t(t,e,n,r,o){var s=this;this.api=t,this.settings=e,this.storage=n,this.translate=r,this.ux=o,this.ready=new Promise(function(t,e){Promise.all([s.settings.load(),s.storage.get(i.j)]).then(function(e){!s.settings.allSettings.offlineMode&&e[1]&&(s.user=e[1],s.user.date+31104e6<(new Date).getTime()&&setTimeout(function(){s.ux.showToast("INFO","SESSIONTIMEOUT_MSG",15e3),s.removeStoredUser()},2e3)),t()})})}return t.prototype.onReady=function(){return this.ready},t.prototype.login=function(t){var e=this,n=this.ux.showLoader(),o=new FormData;return o.append("username",t.username),o.append("password",String(s.Md5.hashStr(t.password))),this.api.post("2/auth/login",o,void 0,!0).map(function(o){if(!o.success)throw n&&n.dismiss(),r.Observable.throw(o);e.processAndGetMoreInfo(o,t),n&&n.dismiss()})},t.prototype.processAndGetMoreInfo=function(t,e){this.user={id:t.login.user.user_id,username:t.login.user.username,session:t.login.session_id,date:(new Date).getTime()},this.storage.set(i.j,this.user);var n=new FormData;n.append("command","Login"),n.append("uname",e.username),n.append("pwd",e.password),this.api.post("members/login.php",n,{withCredentials:!0},void 0,2).subscribe()},t.prototype.isLoggedIn=function(){return this.user&&!this.settings.allSettings.offlineMode},t.prototype.getId=function(){return this.user.id},t.prototype.getName=function(){return this.user.username},t.prototype.getSession=function(){return this.user.session},t.prototype.getDetails=function(){return this.user},t.prototype.checkIfEverythingIsFucked=function(){var t=this;return new Promise(function(e){t.storage.get(i.j).then(function(n){JSON.stringify(t.user)!==JSON.stringify(n)?e(!0):e(!1)})})},t.prototype.removeStoredUser=function(){return Promise.all([this.storage.remove(i.j),this.storage.remove(i.a),this.storage.remove(i.d)])},t.prototype.logout=function(){this.user=null,this.removeStoredUser().then(function(){window.location.reload()})},t}())},58:function(t,e,n){"use strict";n.d(e,"g",function(){return r}),n.d(e,"e",function(){return o}),n.d(e,"h",function(){return s}),n.d(e,"c",function(){return i}),n.d(e,"i",function(){return a}),n.d(e,"j",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return p}),n.d(e,"k",function(){return h}),n.d(e,"f",function(){return d});var r="_queries",o="_recentqueries",s="_storystyle",i="_history",a="_story",u="_user",l="_feed",c="_list",p="_globals",h="_version",d="_settings"},64:function(t,e,n){"use strict";n.d(e,"a",function(){return u});n(0);var r=n(54),o=(n.n(r),n(41),n(34),n(44),n(404)),s=n(58),i=(n(97),n(56),n(70),n(36),n(32),this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}),a=function(t){var e=document.createElement("textarea");e.innerHTML=t;return e.value},u=function(){function t(t,e,n,r,o,i,a,u){var l=this;this.api=t,this.a=e,this.user=n,this.g=r,this.storage=o,this.translate=i,this.alertCtrl=a,this.ux=u,this.stories=new Map,this.ready=new Promise(function(t,e){l.storage.keys().then(function(e){if(e.length<1)t();else{var n=e.length-1;l.storage.forEach(function(e,r,o){0===r.indexOf(s.i)&&l.stories.set(e.id,e),o===n&&t()})}})}),window.checkCachedStories=function(){return console.log(l.stories)}}return t.prototype.onReady=function(){return this.ready},t.prototype.searchStory=function(t,e,n,r){var o=i({q:t},e);return e.astags?this.tagsearch(o,n):this.newsearch(o,n)},t.prototype.getSeries=function(t){var e=[{property:"series_id",value:parseInt(t)}];return this.search(e)},t.prototype.getRelated=function(t){var e=[{property:"related_id",value:parseInt(t)}];return this.search(e)},t.prototype.getAuthorStories=function(t,e){var n=[{property:"user_id",value:parseInt(t)},{property:"type",value:"story"}];return this.search(n,e,null,null,"1/user-submissions")},t.prototype.getAuthorFavs=function(t,e){var n=[{property:"user_id",value:parseInt(t)},{property:"type",value:"story"}];return this.search(n,e,null,null,"1/user-favorites")},t.prototype.getTop=function(t,e){var n=[{property:"type",value:"story"}];return t&&n.push({property:"category_id",value:parseInt(t)}),this.search(n,e,null,null,"1/top")},t.prototype.getNew=function(t,e){var n=[{property:"type",value:"story"},{property:"newonly",value:"yes"}];return t&&n.push({property:"category_id",value:parseInt(t)}),this.search(n,e)},t.prototype.getRandom=function(t,e){var n=[{property:"type",value:"story"},{property:"random",value:"yes"}];return t&&n.push({property:"category_id",value:parseInt(t)}),this.search(n,e,null,null,"1/submissions")},t.prototype.getById=function(t,e,n){var s=this;void 0===e&&(e=!1),void 0===n&&(n=!1);var i=this.stories.get(t);if(i&&!e&&i.length)return r.Observable.of(i);var a=[{property:"submission_id",value:parseInt(t)}],u={filter:JSON.stringify(a).trim()},l=this.ux.showLoader();return this.api.get("2/submissions/pages",u).map(function(e){if(l&&!n&&l.dismiss(),!e.success)return console.error("stories.getById",[t]),s.ux.showToast(),null;var r=i||new o.a({id:e.pages[0].submission_id,title:e.pages[0].name,url:e.pages[0].url,ratingenabled:e.pages[0].allow_vote}),a=e.pages[0].tags?e.pages[0].tags.sort(function(t,e){return e.submission_count-t.submission_count}).map(function(t){return t.name}):[];return r.series=e.pages[0].series_id,r.lang=e.pages[0].lang,r.length=e.total,r.tags=a,r.content=e.pages.map(function(t){return t.content}),s.stories.set(r.id,r),r}).catch(function(e){return l&&l.dismiss(),s.ux.showToast(),console.error("stories.getById",[t],e),r.Observable.of(null)})},t.prototype.rate=function(t,e){var n=this,o=[{property:"submission_id",value:parseInt(t.id)}],s=new FormData;s.append("user_id",this.user.getId()),s.append("session_id",this.user.getSession()),s.append("vote",String(e)),s.append("filter",JSON.stringify(o)),this.api.post("2/submissions/vote",s,void 0,!0).catch(function(n){return console.error("stories.rate",[t,e],n),r.Observable.throw(n)}).subscribe(function(r){r.success?t.myrating=e:(n.ux.showToast(),console.error("stories.rate",[t,e],r.error))})},t.prototype.downloadSeries=function(t){var e=this,n=function(r){void 0===r&&(r=0),r<1&&e.ux.showLoader(),r>=t.length?e.ux.hideLoader():t[r].cached?(e.download(t[r]),e.ux.updateLoader(Math.round(r+1/t.length*100)+"%"),n(r+1)):e.getById(t[r].id,!1,!0).subscribe(function(o){if(!o)return e.ux.showToast("ERROR","SERIES_DOWNLOAD_ERROR"),void e.ux.hideLoader();var s=i({},t[r],o);e.stories.set(s.id,s),e.download(s),e.ux.updateLoader(Math.round(r+1/t.length*100)+"%"),n(r+1)})};t.length>10?this.translate.get(["CONFIRM","SERIES_DOWNLOAD_SIZEWARNING","DOWNLOAD_BUTTON","CANCEL_BUTTON"]).subscribe(function(t){e.alertCtrl.create({title:t.CONFIRM,message:t.SERIES_DOWNLOAD_SIZEWARNING,buttons:[{text:t.DOWNLOAD_BUTTON,handler:function(){n()}},{text:t.CANCEL_BUTTON}]}).present()}):n()},t.prototype.search=function(t,e,n,o,s){var i,a=this,u={page:e||1,filter:JSON.stringify(t)};return(!e||e<2)&&(i=this.ux.showLoader()),this.api.get(s||"1/submissions",u,null,o).map(function(r){return i&&i.dismiss(),r.success||r.submissions?[r.submissions?r.submissions.map(function(t){return a.extractFromSearch(t)}):[],r.total]:(r.hasOwnProperty("total")||(a.ux.showToast(),console.error("stories.search",[t,e,n])),[[],0])}).catch(function(o){return i&&i.dismiss(),a.ux.showToast(),console.error("stories.search",[t,e,n],o),r.Observable.of([[],0])})},t.prototype.newsearch=function(t,e,n,o,s){var a=this;void 0===s&&(s=!1),delete t.astags,s?Array.isArray(t.category)&&(t.category=parseInt(t.category[0])):t.category&&(t.categories=t.category.map(function(t){return parseInt(t)}),delete t.category);var u,l={params:JSON.stringify(i({page:e||1},t))};return(!e||e<2)&&(u=this.ux.showLoader()),this.api.get(o||"3/search/stories",l,null,n).map(function(n){u&&u.dismiss();var r=s?n.submissions:n.data,o=s?n.meta.submissions_count:n.meta.total;return r?[r.map(function(t){return a.extractFromNewSearch(t)}),o]:(o||(a.ux.showToast(),console.error("stories.newsearch",[t,e,s])),[[],0])}).catch(function(n){return u&&u.dismiss(),a.ux.showToast(),console.error("stories.newsearch",[t,e,s],n),r.Observable.of([[],0])})},t.prototype.tagsearch=function(t,e,n,r){var o=this,s={params:JSON.stringify({tags:t.q.split(",").map(function(t){return t.trim()})})};return delete t.q,delete t.astags,delete t.languages,delete t.popular,delete t.editorsChoice,delete t.winner,(!e||e<2)&&this.ux.showLoader(),this.api.get(r||"3/tagsportal/by-name",s,null,n).map(function(t){return t.map(function(t){return t.id})}).mergeMap(function(n){var r=i({tags:n,sort_by:t.sort},t);return o.newsearch(r,e,0,"3/tagsportal/stories",!0)})},t.prototype.persist=function(t){var e=Object.assign({},t);return e.author&&e.author.stories&&delete e.author.stories,this.storage.set(s.i+"_"+t.id,e)},t.prototype.download=function(t){return t.downloaded=!0,t.downloadedtimestamp=new Date,t.cached=!0,this.persist(t)},t.prototype.undownload=function(t){return t.downloaded=!1,t.downloadedtimestamp=null,this.persist(t)},t.prototype.cache=function(t){return t.cached=!0,this.persist(t)},t.prototype.remove=function(t){return this.storage.remove(s.i+"_"+t.id)},t.prototype.removeAll=function(t){var e=this;return Promise.all(Array.from(this.stories).map(function(n){var r=n[1];if(!t||!r.downloaded)return e.remove(r)}))},t.prototype.parseUrl=function(t){return t.includes("//")?t:"https://www.literotica.com/s/"+t},t.prototype.extractFromFeed=function(t){var e=this.stories.get(t.what.id);if(e)return e;var n=this.a.extractFromFeed(t.who),r=new o.a({author:n,id:t.what.id.toString(),title:t.what.title,description:t.what.description,category:a(t.what.category_info.name),categoryID:t.what.category,lang:this.g.getLanguage(t.what.language),timestamp:t.when,rating:t.what.rate_all,viewcount:t.what.view_count,url:this.parseUrl(t.what.url),tags:t.what.tags?t.what.tags.map(function(t){return t.tag}):[],ishot:t.what.is_hot,isnew:t.what.is_new,iswriterspick:t.what.writers_pick,iscontestwinner:t.what.contest_winner,commentsenabled:t.what.enable_comments,ratingenabled:t.what.allow_vote});return this.stories.set(r.id,r),r},t.prototype.extactFromList=function(t){var e=this.stories.get(t.id);if(e)return e;var n=this.a.extractFromFeed(t.author),r=new o.a({author:n,id:t.id.toString(),title:t.title,description:t.description,category:a(t.category_info.name),categoryID:t.category,lang:this.g.getLanguage(t.language),timestamp:Math.round(Date.parse(t.date_added)/1e3),rating:t.rate_all,viewcount:t.view_count,url:this.parseUrl(t.url),tags:t.tags?t.tags.map(function(t){return t.tag}):[],ishot:t.is_hot,isnew:t.is_new,iswriterspick:t.writers_pick,iscontestwinner:t.contest_winner,commentsenabled:t.enable_comments>0,ratingenabled:t.allow_vote});return this.stories.set(r.id,r),r},t.prototype.extractFromSearch=function(t){var e=this.stories.get(t.id);if(e)return e;var n=this.a.extractFromSearch(t.user),r=new o.a({author:n,id:t.id.toString(),title:t.name,description:t.description,category:t.category.name,categoryID:t.category.id,lang:t.lang,timestamp:t.timestamp_published,rating:t.rate,viewcount:t.view_count,url:this.parseUrl(t.url),ishot:"no"!==t.is_hot,isnew:"no"!==t.is_new,iswriterspick:"no"!==t.writers_pick,iscontestwinner:"no"!==t.contest_winner,commentsenabled:t.enable_comments>0,ratingenabled:t.allow_vote>0});return this.stories.set(r.id,r),r},t.prototype.extractFromNewSearch=function(t){var e=this.stories.get(t.id);if(e)return e;var n=t.date_approve.split("/"),r=this.a.extractFromNewSearch(t.author),s=new o.a({author:r,id:t.id.toString(),title:t.title,description:t.description,category:a(t.category_info.name),categoryID:t.category,lang:this.g.getLanguage(t.language),timestamp:Math.round(Date.parse(n[2]+"-"+n[0]+"-"+n[1]+"T00:00:00")/1e3),rating:t.rate_all,viewcount:t.view_count,url:this.parseUrl(t.url),ishot:t.is_hot,isnew:t.is_new,iswriterspick:t.writers_pick,iscontestwinner:t.contest_winner>0,commentsenabled:t.enable_comments>0,ratingenabled:t.allow_vote>0});return this.stories.set(s.id,s),s},t}()},70:function(t,e,n){"use strict";n.d(e,"a",function(){return i});n(0);var r=n(54),o=(n.n(r),n(41),n(34),n(44),n(36),n(56),n(58)),s=n(379),i=(n(32),function(){function t(t,e,n,r,s,i,a){var u=this;this.api=t,this.platform=e,this.user=n,this.storage=r,this.translate=s,this.ux=i,this.popoverCtrl=a,this.version=23,this.storage.get(o.k).then(function(t){t&&t!==u.version&&setTimeout(function(){u.ux.showToast("INFO","UPDATED_MSG",15e3),u.user.removeStoredUser()},2e3),u.storage.set(o.k,u.version)}),this.ready=new Promise(function(t,e){u.storage.get(o.b).then(function(e){e?(u.globals=e,t()):u.query().subscribe(function(){t()})})})}return t.prototype.onReady=function(){return this.ready},t.prototype.getLanguage=function(t){var e=this;return this.globals.languages?Object.keys(this.globals.languages).filter(function(n){var r=e.globals.languages[n];if(parseInt(r.id)===t)return r.shortname})[0]:null},t.prototype.getSearchableLanguages=function(){return this.globals.languages?Object.entries(this.globals.languages).filter(function(t){return!!t[1].domain}).map(function(t){return{id:t[1].id,name:t[1].longname}}):[]},t.prototype.getPopularTags=function(){return this.api.get("3/tagsportal/top",{limit:100,periodCheck:!1,period:"all"})},t.prototype.getVersion=function(){return this.version},t.prototype.isDev=function(){return s.a.DEV},t.prototype.isWebApp=function(){return!this.platform.is("cordova")&&!this.isDev()},t.prototype.checkForUpdates=function(t){var e=this;void 0===t&&(t=!1),this.isWebApp()||(t&&this.ux.showToast("INFO","UPDATE_STARTED",2e3),this.api.get("app.json",void 0,void 0,3).catch(function(t){return console.error("globals.checkForUpdates",t),r.Observable.of(!1)}).subscribe(function(n){n?(n.appid!==e.api.appid&&(e.api.appid=n.appid),n.apikey!==e.api.apikey&&(e.api.apikey=n.apikey),n.version>e.version?e.ux.showToast("INFO","UPDATE_MSG",15e3,"VIEW_BUTTON",!0).then(function(){e.popoverCtrl.create("UpdatePopover",{data:n},{cssClass:"dark-backdrop"}).present()}):t&&e.ux.showToast("INFO","UPDATE_ALREADYDONE",void 0,void 0,!0)):e.ux.showToast("ERROR","UPDATE_FAILEDMSG",void 0,void 0,!0)}))},t.prototype.query=function(){var t=this;if(this.globals)return r.Observable.of(this.globals);var e=this.ux.showLoader();return this.api.get("3/constants",null,null,null,1e4).map(function(n){return e&&e.dismiss(),n?(t.globals=n,t.storage.set(o.b,t.globals),t.globals):(t.ux.showToast(),console.error("globals.query"),null)}).catch(function(n){return e&&e.dismiss(),t.ux.showToast(),console.error("globals.query",n),r.Observable.of(null)})},t}())},97:function(t,e,n){"use strict";n(0),n(1),n(44);var r=n(54),o=function(){return function(t){for(var e in t)this[e]=t[e]}}();n(56),n(36),n(32);n.d(e,"a",function(){return a});var s="https://www.literotica.com/imagesv2/da",i="https://www.literotica.com/imagesv2/da_default.jpg",a=function(){function t(t,e,n,r){this.api=t,this.user=e,this.loadingCtrl=n,this.ux=r,this.authors=new Map}return t.prototype.getDetails=function(t){var e=this,n=[{property:"user_id",value:t}],a={filter:JSON.stringify(n).trim()},u=this.authors.get(t);if(u&&u.bio)return r.Observable.of(u);var l=this.ux.showLoader();return this.api.get("1/user-bio",a).map(function(t){return l&&l.dismiss(),t.success?(u||(u=new o({id:t.user.profile.id,picture:t.user.profile.userpic===s?i:t.user.profile.userpic,name:t.user.profile.username})),u.storycount=t.user.profile.submissions_count,u.bio=t.user.profile.description,e.authors.set(u.id,u),u):(e.ux.showToast(),console.error("author.getDetails"),null)}).catch(function(n){return l&&l.dismiss(),e.ux.showToast(),console.error("author.getDetails",[t],n),r.Observable.of(null)})},t.prototype.getFollowing=function(){var t=this,e=this.ux.showLoader();return this.api.get("3/users/"+this.user.getId()+"/favorite/authors?params={%22nocache%22:true}").map(function(n){return e&&e.dismiss(),n.length?n.map(function(e){return t.extractFromFeed(e)}):(t.ux.showToast(),console.error("author.getFollowing"),[])}).catch(function(n){return e&&e.dismiss(),t.ux.showToast(),console.error("author.getFollowing",n),r.Observable.of([])})},t.prototype.follow=function(t){var e=this,n=new FormData;return n.append("type","member"),n.append("id",t.id),this.api.post("3/users/follow/"+t.id,{}).map(function(t){return t.success}).catch(function(n){return e.ux.showToast(),console.error("author.follow",[t],n),r.Observable.of(!1)}).subscribe(function(n){n?t.following=!0:(e.ux.showToast(),console.error("author.follow",[t]))})},t.prototype.unfollow=function(t){var e=this;return this.api.delete("3/users/follow/"+t.id).map(function(t){return t.success}).catch(function(n){return e.ux.showToast(),console.error("author.unfollow",[t],n),r.Observable.of(!1)}).subscribe(function(n){n?t.following=!1:(e.ux.showToast(),console.error("author.unfollow",[t]))})},t.prototype.extractFromFeed=function(t){var e=this.authors.get(t.id);return e&&e.updatetimestamp?e:(e||(e=new o({id:t.userid,name:t.username,picture:t.userpic===s?i:t.userpic})),e.jointimestamp=t.joindate,e.following=!0,this.authors.set(e.id,e),e)},t.prototype.extractFromSearch=function(t){var e=this.authors.get(t.id);if(e)return e;var n=new o({id:t.id,name:t.username,picture:t.userpic===s?i:t.userpic});return this.authors.set(n.id,n),n},t.prototype.extractFromNewSearch=function(t){var e=this.authors.get(t.userid);if(e)return e;var n=new o({id:t.userid,name:t.username,picture:t.userpic});return this.authors.set(n.id,n),n},t}()}},[414]);var script = document.createElement('script'); script.async = true; script.src = 'https://www.googletagmanager.com/gtag/js?id=UA-142185587-3'; document.head.appendChild(script); window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
